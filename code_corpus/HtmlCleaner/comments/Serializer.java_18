    /**
     * Writes specified TagNode to the output stream, using specified charset
     * and optionally omits node envelope (skips open and close tags of the
     * node).
     * 
     * @param tagNode
     *            Node to be written
     * @param out
     *            Output stream
     * @param charset
     *            Charset of the output
     * @param omitEnvelope
     *            Tells whether to skip open and close tag of the node.
     * @throws IOException
     */
