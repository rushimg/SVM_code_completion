    private double maxIgnoreNaN(double a, double b) {
        if (Double.isNaN(a)) {
            return b;
        }
        else {
            if (Double.isNaN(b)) {
                return a;
            }
            else {
                return Math.max(a, b);
            }
        }
    }

