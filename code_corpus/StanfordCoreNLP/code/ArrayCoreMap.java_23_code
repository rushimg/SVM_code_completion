  private void writeObject(ObjectOutputStream out) throws IOException {
    compact();
    out.defaultWriteObject();
  }

  // TODO: make prettyLog work in the situation of loops
  // in the object graph

