  public static <T> T[] filter(T[] original, Filter<? super T> filter) {
    T[] result = Arrays.copyOf(original, original.length); // avoids generic array creation compile error
    int size = 0;
    for (T value : original) {
      if (filter.accept(value)) {
        result[size] = value;
        size++;
      }
    }
    if (size == original.length) {
      return result;
    }
    return Arrays.copyOf(result, size);
  }

