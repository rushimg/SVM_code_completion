  @SuppressWarnings( { "UnnecessaryUnboxing" })
  public static <E> void logNormalizeInPlace(Counter<E> c) {
    double logsum = logSum(c);
    // for (E key : c.keySet()) {
    // c.incrementCount(key, -logsum);
    // }
    // This should be faster
    for (Map.Entry<E, Double> e : c.entrySet()) {
      e.setValue(e.getValue().doubleValue() - logsum);
    }
  }

  //
  // Query operations
  //

