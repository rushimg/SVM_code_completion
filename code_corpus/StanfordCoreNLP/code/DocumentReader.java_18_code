  public static String readText(Reader in) throws IOException {
    // returns null if the reader is null
    if (in == null) {
      return (null);
    }

    // ensures the reader is buffered
    BufferedReader br = getBufferedReader(in);

    // reads all the chars into a buffer
    StringBuilder sb = new StringBuilder(16000);  // make biggish
    int c;
    while ((c = br.read()) >= 0) {
      sb.append((char) c);
    }

    return sb.toString();
  }

