    protected void updateOutStates(Set<State> out) {
      if (next == null) {
        out.add(this);
      } else {
        for (State s:next) {
          s.updateOutStates(out);
        }
      }
    }

