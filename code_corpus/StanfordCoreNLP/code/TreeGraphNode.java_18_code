  private int indexNodes(int startIndex) {
    if (index() < 0) {		// if this node has no index
      if (tg != null) {
        tg.addNodeToIndexMap(startIndex, this);
      }
      setIndex(startIndex++);
    }
    if (!isLeaf()) {
      for (TreeGraphNode child : children) {
        startIndex = child.indexNodes(startIndex);
      }
    }
    return startIndex;
  }

