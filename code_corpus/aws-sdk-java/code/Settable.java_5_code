    public void set(V value) {
        if (ready) {
            throw new IllegalStateException("already set to " + this.value);
        }
        this.value = value;
        this.ready = true;
        for (Runnable callback : callbacks) {
            callback.run();
        }
    }

