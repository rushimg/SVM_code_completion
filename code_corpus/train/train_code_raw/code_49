        public String getTextBody(HTMLDocument htmlDoc) throws BadLocationException, IOException{
                StringWriter writer = new StringWriter();
                HTMLEditorKit kit = new HTMLEditorKit();
                kit.write(writer, htmlDoc, 0, htmlDoc.getLength());
                return htmlDoc.getText(0, htmlDoc.getLength());
        }

